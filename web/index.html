<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drake Equation Interactive Calculator/Explorer</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <h1 title="The Drake Equation is typically rendered as shown below. This calculator lets you select any variable to solve for and explore what happens when you tweak the others.">Drake Equation Explorer</h1>
        
        <div class="model-selector">
            <label for="equation-model">Equation Model:</label>
            <div class="model-buttons">
                <button id="classic-model" class="model-button active">Classic Drake</button>
                <button id="rare-earth-model" class="model-button">Rare Earth</button>
            </div>
            <div class="model-description">
                <div id="classic-description" class="model-info active">
                    <p>N = R* × fp × ne × fl × fi × fc × L</p>
                    <small>The original Drake Equation for estimating civilizations in our galaxy.</small>
                </div>
                <div id="rare-earth-description" class="model-info">
                    <p>N = R* × fp × fpm × ne × fg × ft × fi × fc × fl × fm × fj × L</p>
                    <small>Extended equation incorporating Rare Earth hypothesis factors.</small>
                </div>
            </div>
        </div>
        <!-- Equation display -->
        <span class="deq-mathtml" id="equation-display">
            <!-- The equation will be dynamically updated based on model selection -->
        </span>
        
        <p title="Enter a numeric value into the field, or use the increment/decrement arrows hidden in the right-side edges of the input boxes." class="explanation">
            Adjust the values below to explore different scenarios in the Drake Equation. 
            <br>
       <!--    Lock variables you want to keep constant --> Select which variable you want to solve for.
        </p>
        <div id="message-container"></div>
        
        <div class="drake-equation">
            <div class="equation-row">
                <div id="R_star_div" class="variable-group">
                    <label for="R_star_input" title="Average rate of star formation in our galaxy">R*</label>
                    <input type="number" id="R_star_input" value="1" step="0.1">
                    <input type="checkbox" id="R_star_lock" title="Lock this value">
                </div>
                <span class="operator">×</span>
                <div id="f_p_div" class="variable-group">
                    <label for="f_p_input" title="Fraction of stars that have planets">f<sub>p</sub></label>
                    <input type="number" id="f_p_input" value="0.2" step="0.01">
                    <input type="checkbox" id="f_p_lock" title="Lock this value">
                </div>
                <span class="operator">×</span>
                <div id="n_e_div" class="variable-group">
                    <label for="n_e_input" title="Average number of planets that could potentially support life per star with planets">n<sub>e</sub></label>
                    <input type="number" id="n_e_input" value="1" step="0.1">
                    <input type="checkbox" id="n_e_lock" title="Lock this value">
                </div>
                <span class="operator">×</span>
                <div id="f_l_div" class="variable-group">
                    <label for="f_l_input" title="Fraction of planets that could support life where life actually appears">f<sub>l</sub></label>
                    <input type="number" id="f_l_input" value="0.1" step="0.01">
                    <input type="checkbox" id="f_l_lock" title="Lock this value">
                </div>
            </div>
            <div class="equation-row">
                <div id="f_i_div" class="variable-group">
                    <label for="f_i_input" title="Fraction of planets with life where intelligent life evolves">f<sub>i</sub></label>
                    <input type="number" id="f_i_input" value="0.01" step="0.001">
                    <input type="checkbox" id="f_i_lock" title="Lock this value">
                </div>
                <span class="operator">×</span>
                <div id="f_c_div" class="variable-group">
                    <label for="f_c_input" title="Fraction of civilizations that develop a technology that releases detectable signs of their existence into space">f<sub>c</sub></label>
                    <input type="number" id="f_c_input" value="0.1" step="0.01">
                    <input type="checkbox" id="f_c_lock" title="Lock this value">
                </div>
                <span class="operator">×</span>
                <div id="L_div" class="variable-group">
                    <label for="L_input" title="Length of time such civilizations release detectable signals into space">L</label>
                    <input type="number" id="L_input" value="1000" step="100">
                    <input type="checkbox" id="L_lock" title="Lock this value">
                </div>
                <span class="operator">=</span>
                <div id="N_div" class="variable-group">
                    <label for="N_input" title="Number of civilizations in our galaxy with which communication might be possible">N</label>
                    <input type="number" id="N_input" readonly>
                    <input type="checkbox" id="N_lock" title="Lock this value" style="display: none;">
                </div>
            </div>
        </div>
        <!-- Rare Earth additional variables (initially hidden) -->
        <div class="rare-earth-vars">
        <!-- Will be populated dynamically -->
        </div>

        <!-- Solve for selector -->
        <div class="solve-for">
            <label for="solve-for-select">Solve for:</label>
            <select id="solve-for-select">
                <!-- Options will be populated based on model -->
            </select>
        </div>
        <!-- Control buttons -->
        <div class="controls">
            <button type="button" id="reset-button">Reset to Defaults</button>
            <button type="button" id="randomize-button">Randomize Unlocked!</button>
        </div>

        <div class="trace-management">
            <button id="new-trace-button">Start New Trace</button>
            <button id="clear-trace-button">Clear Current Trace</button>
            <select id="trace-select">
                <option value="0">Trace 1</option>
            </select>
        </div>
        <!-- Visualization container -->
        <div class="visualization-container">
            <!-- Chart containers -->
            <div id="comparativeBarChart-container">
                <canvas id="comparativeBarChart"></canvas>
            </div>
            <div id="relationshipGraph-container">
                <div id="variableRelationshipGraph"></div>
            </div>
            <div id="distributionCurve-container">
                <canvas id="probabilityDistributionCurve"></canvas>
            </div>
            <div id="heatmap-container">
                <div id="galaxyDensityHeatmap"></div>
            </div>
            <div id="solarSystem-container">
                <div id="solarSystemMap"></div>
            </div>
        </div>
    </div>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>

<script type="module" src="js/calculator/DrakeCalculator.js"></script>
<script type="module" src="js/traces/TraceManager.js"></script>
<script type="module" src="js/ui/UIManager.js"></script>
<script type="module" src="js/utils/ChartUtils.js"></script>
<script type="module" src="js/data/DataProcessor.js"></script>

<script type="text/babel" src="js/visualizations/SolarSystem.js"></script>
<script type="text/babel" src="js/main.js"></script>
</body>
</html>
